<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>给你的一封心动告白</title>
  <meta name="description" content="一个温柔的表白小网站" />
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#161b33;
      --card: rgba(255,255,255,.08);
      --card2: rgba(255,255,255,.12);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);
      --accent:#ff4d6d;
      --accent2:#ffd166;
      --ok:#4ade80;
      --shadow: 0 18px 50px rgba(0,0,0,.35);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "PingFang SC", "Microsoft YaHei", Arial;
      color:var(--text);
      min-height:100vh;
      background:
        radial-gradient(1200px 800px at 10% 10%, rgba(255,77,109,.22), transparent 55%),
        radial-gradient(900px 700px at 90% 20%, rgba(255,209,102,.18), transparent 55%),
        radial-gradient(800px 600px at 50% 100%, rgba(74,222,128,.12), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    /* 星星背景 */
    .stars, .stars2{
      position:fixed; inset:0; pointer-events:none; z-index:0;
      background-repeat:repeat;
      opacity:.45;
      animation: drift 90s linear infinite;
    }
    .stars{
      background-image: radial-gradient(2px 2px at 20px 30px, rgba(255,255,255,.9), transparent 60%),
                        radial-gradient(1.5px 1.5px at 90px 120px, rgba(255,255,255,.8), transparent 60%),
                        radial-gradient(1px 1px at 140px 60px, rgba(255,255,255,.7), transparent 60%),
                        radial-gradient(1.2px 1.2px at 220px 180px, rgba(255,255,255,.65), transparent 60%);
      background-size: 260px 220px;
    }
    .stars2{
      opacity:.25;
      background-image: radial-gradient(1px 1px at 10px 10px, rgba(255,255,255,.85), transparent 60%),
                        radial-gradient(1px 1px at 80px 40px, rgba(255,255,255,.75), transparent 60%),
                        radial-gradient(1px 1px at 130px 90px, rgba(255,255,255,.7), transparent 60%),
                        radial-gradient(1px 1px at 200px 150px, rgba(255,255,255,.65), transparent 60%);
      background-size: 220px 180px;
      animation-duration: 140s;
    }
    @keyframes drift{
      from{transform:translate3d(0,0,0)}
      to{transform:translate3d(-240px, -180px, 0)}
    }

    .wrap{
      position:relative;
      z-index:1;
      max-width: 1040px;
      margin: 0 auto;
      padding: 28px 18px 70px;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap:14px;
      padding: 10px 6px 24px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      user-select:none;
    }
    .heart{
      width:34px; height:34px; border-radius:12px;
      background: linear-gradient(135deg, var(--accent), #ff7aa2);
      box-shadow: 0 10px 30px rgba(255,77,109,.25);
      display:grid; place-items:center;
      transform: rotate(-6deg);
    }
    .heart::before{
      content:"♥";
      font-size:18px;
      filter: drop-shadow(0 6px 12px rgba(0,0,0,.25));
    }
    .brand .t{
      display:flex; flex-direction:column; line-height:1.05;
    }
    .brand strong{font-size:14px; letter-spacing:.2px}
    .brand span{font-size:12px; color:var(--muted)}
    .top-actions{
      display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;
    }
    .pill{
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
      color:var(--text);
      padding: 9px 12px;
      border-radius: 999px;
      font-size: 12px;
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 28px rgba(0,0,0,.18);
      cursor:pointer;
      transition: transform .15s ease, background .15s ease;
    }
    .pill:hover{ transform: translateY(-1px); background: rgba(255,255,255,.09);}

    .hero{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 18px;
      align-items:stretch;
      margin-top: 8px;
    }
    @media (max-width: 860px){
      .hero{grid-template-columns: 1fr; }
    }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border: 1px solid rgba(255,255,255,.18);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
      overflow:hidden;
    }
    .card.pad{ padding: 22px; }
    .kicker{
      color: var(--accent2);
      font-size: 12px;
      letter-spacing: .22em;
      text-transform: uppercase;
      margin-bottom: 8px;
    }
    h1{
      margin:0 0 12px;
      font-size: 34px;
      line-height: 1.15;
    }
    .sub{
      color: var(--muted);
      font-size: 14px;
      line-height: 1.7;
      margin-bottom: 18px;
    }
    .grid2{
      display:grid; grid-template-columns: 1fr 1fr; gap:12px;
    }
    @media (max-width: 520px){
      .grid2{grid-template-columns: 1fr;}
    }
    .mini{
      padding: 14px 14px;
      border-radius: 16px;
      background: rgba(255,255,255,.07);
      border: 1px solid rgba(255,255,255,.12);
    }
    .mini b{ display:block; font-size:13px; margin-bottom:6px;}
    .mini p{ margin:0; color:var(--muted); font-size:13px; line-height:1.55;}

    .right{
      position:relative;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      padding: 0;
    }
    .photo{
      height: 220px;
      background:
        radial-gradient(500px 260px at 20% 30%, rgba(255,77,109,.35), transparent 60%),
        radial-gradient(500px 280px at 80% 20%, rgba(255,209,102,.25), transparent 60%),
        linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.02));
      border-bottom:1px solid rgba(255,255,255,.14);
      position:relative;
      overflow:hidden;
    }
    .photo .hint{
      position:absolute; inset:auto 16px 14px 16px;
      color: rgba(255,255,255,.75);
      font-size: 12px;
      line-height: 1.5;
    }
    .bubbles{
      position:absolute; inset:0;
      opacity:.35;
    }
    .bubbles span{
      position:absolute;
      width: 120px; height:120px; border-radius:999px;
      background: rgba(255,255,255,.18);
      filter: blur(1px);
      animation: float 10s ease-in-out infinite;
    }
    .bubbles span:nth-child(1){ left:-30px; top:20px; animation-duration: 12s;}
    .bubbles span:nth-child(2){ right:-50px; top:40px; width:170px; height:170px; animation-duration: 14s;}
    .bubbles span:nth-child(3){ left:40%; top:120px; width:90px; height:90px; animation-duration: 11s;}
    @keyframes float{
      0%,100%{ transform: translateY(0) translateX(0) scale(1); }
      50%{ transform: translateY(-14px) translateX(8px) scale(1.03); }
    }

    .actions{
      padding: 18px 18px 20px;
      display:flex;
      flex-direction:column;
      gap: 12px;
    }
    .actions .title{
      font-size: 14px;
      color: rgba(255,255,255,.9);
    }
    .btns{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
    }
    button{
      appearance:none; border:none;
      padding: 12px 14px;
      border-radius: 16px;
      font-weight: 650;
      cursor:pointer;
      transition: transform .15s ease, filter .15s ease, background .15s ease;
      letter-spacing:.2px;
    }
    button:hover{ transform: translateY(-1px); }
    .yes{
      background: linear-gradient(135deg, var(--accent), #ff7aa2);
      color:white;
      box-shadow: 0 16px 40px rgba(255,77,109,.30);
    }
    .no{
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.85);
      border: 1px solid rgba(255,255,255,.18);
    }
    .ghost{
      background: transparent;
      color: rgba(255,255,255,.75);
      border: 1px dashed rgba(255,255,255,.22);
    }

    section{
      margin-top: 18px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 18px;
    }
    @media (max-width: 860px){
      section{grid-template-columns: 1fr;}
    }
    .list{
      display:flex; flex-direction:column; gap:10px;
      margin-top: 10px;
    }
    .item{
      padding: 14px 14px;
      border-radius: 16px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      display:flex; gap:12px; align-items:flex-start;
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      margin-top: 5px;
      background: linear-gradient(135deg, var(--accent2), var(--accent));
      box-shadow: 0 10px 22px rgba(255,209,102,.25);
      flex: 0 0 auto;
    }
    .item b{ display:block; font-size:13px; margin-bottom:4px;}
    .item p{ margin:0; color:var(--muted); font-size:13px; line-height:1.55;}

    .note{
      margin-top: 12px;
      color: rgba(255,255,255,.78);
      font-size: 12px;
      line-height: 1.7;
      padding: 12px 14px;
      border-radius: 16px;
      background: rgba(74,222,128,.10);
      border: 1px solid rgba(74,222,128,.18);
    }

    footer{
      margin-top: 26px;
      color: rgba(255,255,255,.55);
      font-size: 12px;
      text-align:center;
      padding: 8px 0 0;
    }

    /* 弹窗 */
    .modal{
      position:fixed; inset:0;
      background: rgba(0,0,0,.55);
      display:none;
      align-items:center; justify-content:center;
      padding: 18px;
      z-index:10;
    }
    .modal.show{display:flex;}
    .modal .box{
      width:min(560px, 100%);
      background: rgba(20,24,45,.92);
      border: 1px solid rgba(255,255,255,.18);
      border-radius: 22px;
      box-shadow: 0 24px 70px rgba(0,0,0,.5);
      backdrop-filter: blur(14px);
      overflow:hidden;
    }
    .modal .box .hd{
      padding: 16px 18px;
      border-bottom: 1px solid rgba(255,255,255,.12);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .badge{
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,77,109,.18);
      border: 1px solid rgba(255,77,109,.35);
      color: rgba(255,255,255,.9);
    }
    .modal .box .bd{
      padding: 18px;
    }
    .modal h2{ margin:0 0 8px; font-size:18px;}
    .modal p{ margin:0; color: var(--muted); line-height:1.7; font-size: 14px;}
    .modal .box .ft{
      padding: 14px 18px 18px;
      display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;
    }
    .close{
      background: rgba(255,255,255,.10);
      color: rgba(255,255,255,.9);
      border: 1px solid rgba(255,255,255,.18);
    }
    .copy{
      background: rgba(74,222,128,.18);
      color: rgba(255,255,255,.92);
      border: 1px solid rgba(74,222,128,.30);
    }

    /* 简易“礼花” */
    canvas#confetti{
      position:fixed; inset:0; pointer-events:none; z-index:9;
      display:none;
    }
    canvas#confetti.show{ display:block; }
  </style>
</head>

<body>
  <div class="stars"></div>
  <div class="stars2"></div>
  <canvas id="confetti"></canvas>

  <div class="wrap">
    <header>
      <div class="brand">
        <div class="heart"></div>
        <div class="t">
          <strong id="siteTitle">给你的一封心动告白</strong>
          <span id="siteSub">如果你愿意，我想把“我们”写成未来</span>
        </div>
      </div>
      <div class="top-actions">
        <button class="pill" id="editBtn" type="button">一键改成你的话</button>
        <button class="pill" id="shareBtn" type="button">复制表白文案</button>
      </div>
    </header>

    <div class="hero">
      <div class="card pad">
        <div class="kicker">TO · 你</div>
        <h1 id="headline">我喜欢你，想和你认真地在一起。</h1>
        <div class="sub" id="subline">
          不是突然的冲动，而是一次次被你吸引后，慢慢变得确定。<br/>
          我希望以后：一起吃饭、一起散步、一起分享琐碎和浪漫。
        </div>

        <div class="grid2">
          <div class="mini">
            <b>我欣赏你</b>
            <p id="praise">你的认真、你的善良、你看世界时那种温柔的坚定。</p>
          </div>
          <div class="mini">
            <b>我想给你</b>
            <p id="promise">尊重、偏爱、稳定的陪伴，以及把你放在心上的行动。</p>
          </div>
        </div>

        <div class="note" id="consentNote">
          小小声明：你的感受最重要。无论答案是什么，我都尊重你，也珍惜我们之间的每一份美好。
        </div>
      </div>

      <div class="card right">
        <div class="photo" aria-hidden="true">
          <div class="bubbles"><span></span><span></span><span></span></div>
          <div class="hint">你可以把这里换成你们的合照/回忆图（看下方说明）</div>
        </div>

        <div class="actions">
          <div class="title">所以……你愿意做我女朋友吗？</div>
          <div class="btns">
            <button class="yes" id="yesBtn" type="button">我愿意 ❤️</button>
            <button class="no" id="noBtn" type="button">我再想想</button>
            <button class="ghost" id="letterBtn" type="button">先看看我的心里话</button>
          </div>
          <div style="color:rgba(255,255,255,.55); font-size:12px; line-height:1.6;">
            提示：按 <b>Esc</b> 可关闭弹窗；本页不会强制你做任何选择。
          </div>
        </div>
      </div>
    </div>

    <section>
      <div class="card pad">
        <div class="kicker">MEMORIES</div>
        <h2 style="margin:0 0 8px; font-size:18px;">我想把这些，变成我们的日常</h2>
        <div class="list" id="wishList">
          <div class="item"><div class="dot"></div><div><b>一起吃很多次饭</b><p>街边小店也好，认真约会也好，和你一起都好。</p></div></div>
          <div class="item"><div class="dot"></div><div><b>一起散步看夜景</b><p>把烦恼交给风，把心事交给你。</p></div></div>
          <div class="item"><div class="dot"></div><div><b>一起计划小旅行</b><p>去海边、去山里、去你想去的任何地方。</p></div></div>
        </div>
      </div>

      <div class="card pad">
        <div class="kicker">LETTER</div>
        <h2 style="margin:0 0 8px; font-size:18px;">给你的心里话</h2>
        <p id="letter" style="margin:0; color:var(--muted); line-height:1.85; font-size:14px;">
          我喜欢你不是因为你“刚好”，而是因为你“很好”。<br/>
          我愿意在你开心时分享快乐，也愿意在你难过时给你肩膀。<br/>
          如果你愿意，我们就从今天开始，慢慢把彼此写进未来。
        </p>

        <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
          <button class="copy" id="copyLetter" type="button">复制这段心里话</button>
          <button class="close" id="openModal" type="button">打开回答窗口</button>
        </div>
      </div>
    </section>

    <footer>
      Made with ♥ · 你可以随便改文案、颜色、加入照片和音乐，让它更像你们。
    </footer>
  </div>

  <!-- 结果弹窗 -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="mTitle">
    <div class="box">
      <div class="hd">
        <div class="badge" id="mBadge">小惊喜</div>
        <button class="pill" id="mX" type="button">关闭</button>
      </div>
      <div class="bd">
        <h2 id="mTitle">谢谢你愿意认真看完</h2>
        <p id="mText">不管你的答案是什么，我都尊重你。你可以把想说的话发给我：<br><br>
          “我愿意 ❤️” 或 “我想再想想，我们慢慢来”。
        </p>
      </div>
      <div class="ft">
        <button class="close" id="mClose" type="button">我知道啦</button>
        <button class="copy" id="mCopy" type="button">复制一句回复</button>
      </div>
    </div>
  </div>

  <script>
    // ====== 可自定义的默认内容（也可点击“一键改成你的话”弹窗输入） ======
    const defaultData = {
      siteTitle: "给你的一封心动告白",
      siteSub: "如果你愿意，我想把“我们”写成未来",
      headline: "我喜欢你，想和你认真地在一起。",
      subline: "不是突然的冲动，而是一次次被你吸引后，慢慢变得确定。\\n我希望以后：一起吃饭、一起散步、一起分享琐碎和浪漫。",
      praise: "你的认真、你的善良、你看世界时那种温柔的坚定。",
      promise: "尊重、偏爱、稳定的陪伴，以及把你放在心上的行动。",
      letter: "我喜欢你不是因为你“刚好”，而是因为你“很好”。\\n我愿意在你开心时分享快乐，也愿意在你难过时给你肩膀。\\n如果你愿意，我们就从今天开始，慢慢把彼此写进未来。"
    };

    const $ = (id) => document.getElementById(id);

    function applyData(d){
      $("siteTitle").textContent = d.siteTitle;
      $("siteSub").textContent = d.siteSub;
      $("headline").textContent = d.headline;
      $("subline").innerHTML = (d.subline || "").replaceAll("\\n","<br/>");
      $("praise").textContent = d.praise;
      $("promise").textContent = d.promise;
      $("letter").innerHTML = (d.letter || "").replaceAll("\\n","<br/>");
    }

    // 从 URL 参数读取（便于分享）：?to=xx&from=xx
    // 这里做轻量支持：to 会替换“TO · 你”
    (function init(){
      applyData(defaultData);
      const params = new URLSearchParams(location.search);
      const to = params.get("to");
      if(to){
        document.querySelector(".kicker").textContent = "TO · " + to;
      }
    })();

    // ====== 弹窗 ======
    const modal = $("modal");
    function openModal(badge, title, text, copyText){
      $("mBadge").textContent = badge;
      $("mTitle").textContent = title;
      $("mText").innerHTML = text;
      $("mCopy").onclick = async () => {
        try{
          await navigator.clipboard.writeText(copyText);
          $("mBadge").textContent = "已复制 ✅";
          setTimeout(()=> $("mBadge").textContent = badge, 900);
        }catch(e){
          alert("复制失败：你的浏览器可能不允许剪贴板访问。");
        }
      };
      modal.classList.add("show");
    }
    function closeModal(){ modal.classList.remove("show"); }

    $("mClose").onclick = closeModal;
    $("mX").onclick = closeModal;
    modal.addEventListener("click", (e)=>{ if(e.target === modal) closeModal(); });
    document.addEventListener("keydown", (e)=>{ if(e.key === "Escape") closeModal(); });

    $("openModal").onclick = () => {
      openModal(
        "认真回答",
        "你想怎么说都可以",
        "你可以直接发我一句：<br><br>“我愿意 ❤️” 或 “我想再想想，我们慢慢来”。",
        "我愿意 ❤️"
      );
    };

    // ====== 复制文案 ======
    async function copyText(text){
      await navigator.clipboard.writeText(text);
    }
    $("shareBtn").onclick = async () => {
      const text =
`我想对你说：${$("headline").textContent}
${$("subline").innerText}
——
${$("letter").innerText}`;
      try{
        await copyText(text);
        $("shareBtn").textContent = "已复制 ✅";
        setTimeout(()=> $("shareBtn").textContent = "复制表白文案", 1000);
      }catch(e){
        alert("复制失败：你的浏览器可能不允许剪贴板访问。");
      }
    };
    $("copyLetter").onclick = async () => {
      try{
        await copyText($("letter").innerText);
        $("copyLetter").textContent = "已复制 ✅";
        setTimeout(()=> $("copyLetter").textContent = "复制这段心里话", 1000);
      }catch(e){
        alert("复制失败：你的浏览器可能不允许剪贴板访问。");
      }
    };

    // ====== 一键改文案（用 prompt 简单实现） ======
    $("editBtn").onclick = () => {
      const d = {...defaultData};
      d.siteTitle = prompt("网站标题：", d.siteTitle) ?? d.siteTitle;
      d.siteSub = prompt("副标题：", d.siteSub) ?? d.siteSub;
      d.headline = prompt("主标题（表白核心一句）：", d.headline) ?? d.headline;
      d.subline = prompt("副文案（可用 \\n 换行）：", d.subline) ?? d.subline;
      d.praise = prompt("你欣赏TA的点：", d.praise) ?? d.praise;
      d.promise = prompt("你想给TA的承诺：", d.promise) ?? d.promise;
      d.letter = prompt("心里话（可用 \\n 换行）：", d.letter) ?? d.letter;
      applyData(d);
      openModal("已更新", "文案已替换", "好啦，现在这个页面更像你了。<br/>你也可以继续改 HTML 里的 defaultData。", "我愿意 ❤️");
    };

    // ====== 互动按钮 ======
    $("letterBtn").onclick = () => {
      openModal(
        "心里话",
        "我想认真对你说",
        $("letter").innerHTML,
        $("letter").innerText
      );
    };

    $("noBtn").onclick = () => {
      openModal(
        "尊重你",
        "没关系，我们慢慢来",
        "谢谢你愿意认真考虑。<br/>无论答案是什么，我都会尊重你、也珍惜你。<br/><br/>如果你愿意，也可以告诉我你在意的点，我会认真听。",
        "我想再想想，我们慢慢来。"
      );
    };

    // ====== 简易礼花 ======
    const canvas = $("confetti");
    const ctx = canvas.getContext("2d");
    let W, H, pieces = [], raf = null;

    function resize(){
      W = canvas.width = window.innerWidth * devicePixelRatio;
      H = canvas.height = window.innerHeight * devicePixelRatio;
      ctx.scale(devicePixelRatio, devicePixelRatio);
      // 重新设置后 scale 会叠加，简单处理：刷新页面时无感；此处不做复杂重置
    }
    window.addEventListener("resize", ()=> location.reload()); // 简化处理

    function makeConfetti(){
      canvas.classList.add("show");
      pieces = [];
      const n = 140;
      for(let i=0;i<n;i++){
        pieces.push({
          x: Math.random()*window.innerWidth,
          y: -20 - Math.random()*window.innerHeight*0.2,
          r: 3 + Math.random()*4,
          vx: -2 + Math.random()*4,
          vy: 2 + Math.random()*5,
          rot: Math.random()*Math.PI,
          vr: -0.15 + Math.random()*0.3,
          life: 240 + Math.random()*120
        });
      }
      let t = 0;
      const draw = () => {
        t++;
        ctx.clearRect(0,0,window.innerWidth, window.innerHeight);
        pieces.forEach(p=>{
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.vr;
          p.vy += 0.02; // gravity
          p.life--;

          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          // 不指定颜色：用渐变的“亮色块”模拟
          ctx.fillStyle = `hsla(${(t*4 + p.x)%360}, 90%, 65%, .9)`;
          ctx.fillRect(-p.r, -p.r, p.r*2.2, p.r*1.4);
          ctx.restore();
        });
        pieces = pieces.filter(p=>p.life>0 && p.y<window.innerHeight+40);
        if(pieces.length>0){
          raf = requestAnimationFrame(draw);
        }else{
          canvas.classList.remove("show");
          cancelAnimationFrame(raf);
        }
      };
      draw();
    }

    $("yesBtn").onclick = () => {
      makeConfetti();
      openModal(
        "YES! ❤️",
        "我好开心！",
        "那我们就从今天开始认真在一起吧。<br/><br/>我会好好对你，也会用行动让你安心。",
        "我愿意 ❤️"
      );
    };
  </script>
</body>
</html>
